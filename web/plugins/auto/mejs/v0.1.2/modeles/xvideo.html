[(#REM)     
Modele xvideo pour SPIP
Utilise la balise HTML5 <video>
Auteur B.Degoy
Copyright (c) 2014 DnC
Licence GPL3

Parametres:
- id:     id_document
- volume
- autoplay

Voir : http://www.alsacreations.com/xmedia/tuto/html5/video/exemples.html

Pour chaque video trucmuch, il faut obligatoirement un fichier trucmuch.mp4 et un fichier
trucmuch.webm et/ou trucmuch.ogv por que cela fonctionne sur (presque) tous les navigateurs. 

]



<BOUCLE_mp4(DOCUMENTS){id_document=#ID}{extension=mp4}{tout}>

    [(#LARGEUR|oui)#SET{largeur,#LARGEUR}]
    [(#LARGEUR|non)#SET{largeur,#ENV{largeur,720}]
    [(#HAUTEUR|oui)#SET{hauteur,#HAUTEUR}]
    [(#HAUTEUR|non)#SET{hauteur,#ENV{hauteur,360}]

    #SET{f1,#FICHIER|basename{mp4}}

    <video[ width="(#GET{largeur})"][ height="(#GET{hauteur})"] 
    controls="controls"
    [(#ENV{autoplay}|=={oui}|oui) autoplay="true"]
    [(#LOGO_DOCUMENT|extraire_attribut{src}|couper{23,''}|=={plugins-dist/medias}|non) [poster="(#LOGO_DOCUMENT|extraire_attribut{src})"]]
    > 
        <source src="#FICHIER" type="video/mp4"/>
        <BOUCLE_tous(DOCUMENTS){extension==webm|ogv}{tout}>
                #SET{f2,#FICHIER|basename}
                [(#GET{f2}|=={#GET{f1}webm}|oui)<source src="#FICHIER" type="video/webm" />]
                [(#GET{f2}|=={#GET{f1}ogv}|oui)<source src="#FICHIER" type="video/ogg" />]         
        </BOUCLE_tous>
        <object type="application/x-shockwave-flash" width="400" height="222" data="#FICHIER"> 
            <param name="movie" value="#FICHIER" /> 
            <param name="wmode" value="transparent" />
            <!--[if lte IE 6 ]>
            <embed src="#FICHIER" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true"[ width="(#GET{largeur})"][ height="(#GET{hauteur})"]></embed>
            <![endif]--> 
            <p>Vous n'avez pas de navigateur moderne, ni flash installé sur votre navigateur...</p> 
        </object> 
    </video>  

</BOUCLE_mp4>

#FILTRE{trim}